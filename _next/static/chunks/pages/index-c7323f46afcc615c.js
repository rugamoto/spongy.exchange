(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(27185)}])},27185:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return K}});var r=t(47568),o=t(41799),i=t(34051),a=t.n(i),c=t(85893),s=t(9008),u=t.n(s),l=t(214),d=t.n(l),f=t(63011),h=t(67294),v=new f.Socket({apiKey:"645b2c8c-5825-4930-baf3-d9b997fcd88c"}),p=(0,h.createContext)(null),x=t(55055),m=t.n(x),_=function(){var n,e=(0,h.useContext)(p);function t(){return(t=(0,r.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===e||void 0===e?void 0:e.connectWallet();case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var o=(0,h.useState)(),i=o[0],s=o[1];return(0,h.useEffect)((function(){var n;(null===e||void 0===e||null===(n=e.network)||void 0===n?void 0:n.chainId)&&(0,r.Z)(a().mark((function n(){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,v.getChain(null===e||void 0===e||null===(t=e.network)||void 0===t?void 0:t.chainId);case 3:r=n.sent,s(r);case 5:case"end":return n.stop()}}),n)})))()}),[null===e||void 0===e||null===(n=e.network)||void 0===n?void 0:n.chainId]),(0,c.jsx)("div",{className:m().wallet,children:(null===e||void 0===e?void 0:e.account)?(0,c.jsxs)("div",{className:m().account,children:[i&&(0,c.jsx)("img",{src:i.icon,alt:i.name}),(0,c.jsx)("div",{children:e.account})]}):(0,c.jsx)("button",{onClick:function(){return t.apply(this,arguments)},children:"Connect Wallet"})})},j=t(241),g=t(45811),w=t(74845),k=t(42484),y=t.n(k),b="9aa3d95b3bc440fa88ea12eaa4456161";function S(){var n=function(){var n=(0,h.useState)(null),e=n[0],t=n[1];return(0,h.useEffect)((function(){var n=new(y())({cacheProvider:!0,network:"mainnet",providerOptions:{walletconnect:{package:w.Z,options:{infuraId:b}},coinbasewallet:{package:g.ZP,options:{appName:"Spongey",infuraId:b}}}});t(n)}),[]),e}(),e=(0,h.useState)(),t=e[0],o=e[1],i=(0,h.useState)(),c=i[0],s=i[1],u=(0,h.useState)(),l=u[0],d=u[1],f=function(){var n=(0,r.Z)(a().mark((function n(e){var t,r,i,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.connect();case 2:return t=n.sent,r=new j.Q(t,"any"),o(r),n.next=7,r.listAccounts();case 7:return i=n.sent,s(i[0]),n.next=11,r.getNetwork();case 11:c=n.sent,d(c);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();(0,h.useEffect)((function(){n&&n.cachedProvider&&f(n)}),[n]);var v=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,f(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{web3Modal:n,provider:t,account:c,network:l,connectWallet:v}}var C=t(69396),N=t(80883),I=t(81590),Z=function(n){return(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",textAlign:"left"},children:[(0,c.jsx)("img",{src:n.icon,style:{width:24}}),(0,c.jsx)("span",{style:{marginLeft:5},children:n.label})]})},E=function(n){return(0,c.jsx)(I.c.Option,(0,C.Z)((0,o.Z)({},n),{children:(0,c.jsx)(Z,(0,o.Z)({},n.data))}))},T=function(n){return(0,c.jsx)(I.c.SingleValue,(0,C.Z)((0,o.Z)({},n),{children:(0,c.jsx)(Z,(0,o.Z)({},n.data))}))},A=function(n){var e,t,r=n.list,o=n.value,i=n.onChange;return(0,c.jsx)("div",{style:{width:240},children:(0,c.jsx)(N.ZP,{placeholder:"Select Chain",value:o&&{value:o,label:null===(e=r.tokenByAddress(o))||void 0===e?void 0:e.name,icon:null===(t=r.tokenByAddress(o))||void 0===t?void 0:t.icon},options:r.tokens.map((function(n){return{value:n.address,label:n.name,icon:n.icon}})),onChange:function(n){return i(null===n||void 0===n?void 0:n.value)},components:{Option:E,SingleValue:T}})})},H=t(84567),O=function(n){return(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("img",{src:n.icon,style:{width:24}}),(0,c.jsx)("span",{style:{marginLeft:5},children:n.label})]})},D=function(n){return(0,c.jsx)(I.c.Option,(0,C.Z)((0,o.Z)({},n),{children:(0,c.jsx)(O,(0,o.Z)({},n.data))}))},P=function(n){return(0,c.jsx)(I.c.SingleValue,(0,C.Z)((0,o.Z)({},n),{children:(0,c.jsx)(O,(0,o.Z)({},n.data))}))},V=function(n){var e,t,r=n.label,o=n.chains,i=n.value,a=n.onChange;return(0,c.jsxs)("div",{style:{width:200},children:[(0,c.jsx)("label",{children:r}),(0,c.jsx)(N.ZP,{placeholder:"Select Chain",value:{value:i,label:null===(e=o.find((function(n){return n.chainId===i})))||void 0===e?void 0:e.name,icon:null===(t=o.find((function(n){return n.chainId===i})))||void 0===t?void 0:t.icon},options:o.map((function(n){return{value:n.chainId,label:n.name,icon:n.icon}})),onChange:function(n){return a(null===n||void 0===n?void 0:n.value)},components:{Option:D,SingleValue:P}})]})},L=t(61744),B=t(25675),W=t.n(B),q={src:"/spongy.exchange/_next/static/media/icon.c807a574.svg",height:500,width:500},R=t(64055),G=function(n){var e=n.quote,t=n.tx,r=n.done,o=n.onClickDone;return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("strong",{children:[e.path.fromToken.name," -> ",e.path.toToken.name]}),"(",e.route.totalUserTx," Transactions)"]}),r?(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:"Exchange Done"}),(0,c.jsx)("button",{onClick:o,children:"Ok"})]}):(0,c.jsx)("div",{children:t&&(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:{textAlign:"left",display:"flex",justifyContent:"center",margin:"10px 0"},children:(0,c.jsx)(R.Z,{color:"blue",size:30})}),(0,c.jsxs)("div",{children:["Transaction ",t.userTxIndex+1," / ",t.totalUserTx]})]})})]})},K=function(){var n=function(){K(null),U(!1),X(void 0),P(void 0)},e=S(),t=(0,h.useState)([]),i=t[0],s=t[1],l=(0,h.useState)(f.ChainId.MAINNET_CHAIN_ID),x=l[0],m=l[1],j=(0,h.useState)(f.ChainId.POLYGON_CHAIN_ID),g=j[0],w=j[1],k=(0,h.useState)(),y=k[0],b=k[1],C=(0,h.useState)(H.NATIVE_TOKEN_ADDRESS),N=C[0],I=C[1],Z=(0,h.useState)(H.NATIVE_TOKEN_ADDRESS),E=Z[0],T=Z[1],O=(0,h.useState)(),D=O[0],P=O[1],B=(0,h.useState)(null),R=B[0],K=B[1],M=(0,h.useState)(!1),Q=M[0],U=M[1];(0,h.useEffect)((function(){if(e.account&&y&&x&&g&&N&&E&&D){var n=function(){var n=(0,r.Z)(a().mark((function n(){var t,r,o,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=y.from.tokenByAddress(N),r=y.to.tokenByAddress(E),t&&r){n.next=4;break}throw new Error("token not found");case 4:return o=new f.Path({fromToken:t,toToken:r}),n.next=7,v.getBestQuote({address:e.account,amount:L.vz(D,t.decimals).toString(),path:o});case 7:i=n.sent,console.log(i),K(i);case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}}),[e.account,y,x,g,N,E,D]),(0,h.useEffect)((function(){var n=function(){var n=(0,r.Z)(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.getChains();case 2:e=n.sent,s(e);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,h.useEffect)((function(){var n=function(){var n=(0,r.Z)(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.getTokenList({fromChainId:x,toChainId:g});case 2:e=n.sent,b(e);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[x,g]);var z=(null===R||void 0===R?void 0:R.route.toAmount)&&L.bM(R.route.toAmount,R.path.toToken.decimals),Y=(0,h.useState)(),F=Y[0],X=Y[1];function J(){return(J=(0,r.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.provider){n.next=2;break}throw new Error("No provider detected. Are you connected?");case 2:if(R){n.next=4;break}throw new Error("No quote detected. Did you get a quote?");case 4:return t=v.connect(e.provider),n.next=7,t.start(R,{onTx:function(n){console.log(n),X(n)},onDone:function(){return U(!0)}});case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function $(){return($=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.jsx)(p.Provider,{value:(0,o.Z)({},e),children:(0,c.jsxs)("div",{className:d().container,children:[(0,c.jsxs)(u(),{children:[(0,c.jsx)("title",{children:"Spongy Exchange"}),(0,c.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,c.jsxs)("main",{className:d().main,children:[(0,c.jsx)("header",{className:d().header,children:(0,c.jsx)(_,{})}),(0,c.jsx)(W(),{src:q,alt:"Spongy",width:"200",height:"200"}),(0,c.jsx)("p",{style:{marginBottom:20,marginTop:0,fontWeight:"bold"},children:"Spongy.exchange"}),R&&F?(0,c.jsx)(G,{quote:R,tx:F,done:Q,onClickDone:function(){return $.apply(this,arguments)}}):(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:d().chains,children:[(0,c.jsx)(V,{label:"Transfer From",value:x,chains:i,onChange:function(n){return m(n)}}),(0,c.jsx)(V,{label:"Transfer To",value:g,chains:i,onChange:function(n){return w(n)}})]}),y&&(0,c.jsxs)("div",{className:d().tokens,children:[(0,c.jsx)("label",{children:"Send"}),(0,c.jsxs)("div",{className:d().tokenSelect,children:[(0,c.jsx)("input",{className:d().amountInput,type:"text",value:D,onChange:function(n){return P(n.target.value)},placeholder:"0.0"}),(0,c.jsx)(A,{value:N,onChange:function(n){return I(n)},list:y.from})]}),(0,c.jsx)("label",{children:"Receive"}),(0,c.jsxs)("div",{className:d().tokenSelect,children:[(0,c.jsx)("input",{type:"text",disabled:!0,value:z,placeholder:"0.0",className:d().amountInput}),(0,c.jsx)(A,{value:E,onChange:function(n){return T(n)},list:y.to})]})]}),(0,c.jsx)("button",{onClick:function(){return J.apply(this,arguments)},disabled:!R,children:"Exchange!"})]})]}),(0,c.jsx)("footer",{className:d().footer,children:"Made with \u2764\ufe0f by anons all over the interwebs"})]})})}},214:function(n){n.exports={container:"Home_container__bCOhY",header:"Home_header__GCVRv",main:"Home_main__nLjiQ",chains:"Home_chains__UoYhU",tokens:"Home_tokens__p8oVy",tokenSelect:"Home_tokenSelect__yvFIx",amountInput:"Home_amountInput__NVE1C",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},55055:function(n){n.exports={wallet:"Wallet_wallet__qGkym",account:"Wallet_account__phNwz"}},12769:function(){},88677:function(){},62808:function(){},36563:function(){},46601:function(){},89214:function(){},24654:function(){},52361:function(){},94616:function(){},6567:function(){}},function(n){n.O(0,[277,945,774,888,179],(function(){return e=48312,n(n.s=e);var e}));var e=n.O();_N_E=e}]);